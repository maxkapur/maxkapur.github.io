<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Styling -->
  <link rel="stylesheet" href="/assets/main.css" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#fffff5" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#546270" />

  <!-- Favicon -->
  <link rel="shortcut icon" href="/assets/favicon/favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="icon" href="/assets/favicon/favicon.ico" sizes="any" />
  <link rel="icon" href="/assets/favicon/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/assets/favicon/favicon_180.png" />
  <link rel="manifest" href="/assets/favicon/site.webmanifest" />

  <!-- Atom feed -->
  <link type="application/atom+xml" rel="alternate" href="https://maxkapur.com/feed.xml" title="Illusion Slopes" />

  <title>Illusion Slopes | Illusion Slopes</title>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Illusion Slopes | I blog about culture, numerical optimization, and software. I work at a consulting firm as an operations research and numerical modeling specialist. All opinions are my own.</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Illusion Slopes" />
<meta name="author" content="Max Kapur" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I blog about culture, numerical optimization, and software. I work at a consulting firm as an operations research and numerical modeling specialist. All opinions are my own." />
<meta property="og:description" content="I blog about culture, numerical optimization, and software. I work at a consulting firm as an operations research and numerical modeling specialist. All opinions are my own." />
<link rel="canonical" href="https://maxkapur.com/" />
<meta property="og:url" content="https://maxkapur.com/" />
<meta property="og:site_name" content="Illusion Slopes" />
<meta property="og:type" content="website" />
<link rel="next" href="https://maxkapur.com/page/2/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Illusion Slopes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","author":{"@type":"Person","name":"Max Kapur"},"description":"I blog about culture, numerical optimization, and software. I work at a consulting firm as an operations research and numerical modeling specialist. All opinions are my own.","headline":"Illusion Slopes","name":"Illusion Slopes","url":"https://maxkapur.com/"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <header class="site-header" role="banner">
    <div class="wrapper"><div class="site-title-wrapper">
        <div>
          <a class="site-title" rel="author" href="/">Illusion Slopes</a>
        </div>
      </div><nav class="site-nav">
      <div class="page-links"><div>
          <a class="page-link" href="/about/">About</a>
        </div><div>
          <a class="page-link" href="/projects/">Projects</a>
        </div><div>
          <a class="page-link" href="/browse/">Browse</a>
        </div></div>
    </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">
    <div class="post-list"><div class="post-list-item"><span class="post-meta">
          <time datetime="2025-12-19T00:00:00+00:00">Dec 19, 2025</time>
        </span>
        <h2>
          <a class="post-link" href="/2025/12/19/perfect-match-integer-programming.html">
            Find your perfect match with integer programming
          </a>
        </h2><p>Owen Lacey
<a href="https://blog.owenlacey.dev/posts/are-you-the-one-is-free-money/">blogged</a> about
a reality game show called <em>Are You the One?</em> in which contestants win a
prize by guessing the soulmate ordained for them by the show’s producers.
Specifically, there are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> men and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> women, and each one has an unknown
“perfect” match; to win the prize, the contestants (as a group) must pair
everyone up correctly.</p>

<p>During each episode, the contestants get two kinds of clues:</p>

<ol>
  <li>Truth Booth, where the contestants submit a single <em>couple</em> and learn whether
that couple is a perfect match.</li>
  <li>Match Up, where the contestants submit a <em>matching</em> (assigning everyone to a
couple) and learn the number (but not the identity) of perfect matches
present in their matching.</li>
</ol>

<p>The game ends after Match Up if all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> couples in the matching are correct.
Definitely check out Owen’s post, which has a better (and illustrated!)
explanation of the rules.</p>

<p>Below, I present an efficient algorithm for playing Are You the One.
It exploits both the informational clues and contestants’ intuitions to find
perfect matches quickly. With modest assumptions on the quality of
players’ intuitions, my algorithm wins by episode 10 in 100% of simulated
seasons.</p>
<p class="excerpt-warning">
	        <a href="/2025/12/19/perfect-match-integer-programming.html">Read more →</a>
          </p></div><div class="post-list-item"><span class="post-meta">
          <time datetime="2025-12-10T00:00:00+00:00">Dec 10, 2025</time>
        </span>
        <h2>
          <a class="post-link" href="/2025/12/10/pytest-ruff-mypy.html">
            Pytest + Ruff + Mypy
          </a>
        </h2><p>There is a <a href="https://pypi.org/project/pytest-ruff/">pytest-ruff</a> plugin for
Pytest (a Python testing framework) that will automatically run
<code class="language-plaintext highlighter-rouge">ruff format --check</code> and <code class="language-plaintext highlighter-rouge">ruff check</code> as part of your test suite. The
<a href="https://pypi.org/project/pytest-mypy/">pytest-mypy</a> plugin does the same thing
for Mypy. These plugins are handy, but for some reason , the tests they generate
are exempted from the <code class="language-plaintext highlighter-rouge">pytest -k ...</code> logic. Normally, you can use <code class="language-plaintext highlighter-rouge">-k</code> to
select a subset of tests to run, but if you install one of the plugins
mentioned, that plugin’s tests run no matter what. This can slow you down if,
like me, you develop on a slow computer.</p>

<p>So, here’s what I use instead of pytest-ruff and pytest-mypy: A humble
<code class="language-plaintext highlighter-rouge">test/test_qa.py</code> file with three functions.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">subprocess</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span> <span class="n">mypy.api</span>

<span class="n">REPO_ROOT</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="n">parent</span><span class="p">.</span><span class="n">parent</span>


<span class="k">def</span> <span class="nf">test_mypy</span><span class="p">():</span>
    <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">,</span> <span class="n">returncode</span> <span class="o">=</span> <span class="n">mypy</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="nf">run</span><span class="p">([</span><span class="nf">str</span><span class="p">(</span><span class="n">REPO_ROOT</span><span class="p">)])</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">sys</span><span class="p">.</span><span class="n">stderr</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">stderr</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_ruff_format</span><span class="p">():</span>
    <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span>
        <span class="p">[</span><span class="n">sys</span><span class="p">.</span><span class="n">executable</span><span class="p">,</span> <span class="sh">"</span><span class="s">-m</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">ruff</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">format</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">--check</span><span class="sh">"</span><span class="p">],</span>
        <span class="n">cwd</span><span class="o">=</span><span class="n">REPO_ROOT</span><span class="p">,</span>
        <span class="n">check</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">test_ruff_lint</span><span class="p">():</span>
    <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span>
        <span class="p">[</span><span class="n">sys</span><span class="p">.</span><span class="n">executable</span><span class="p">,</span> <span class="sh">"</span><span class="s">-m</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">ruff</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">check</span><span class="sh">"</span><span class="p">],</span>
        <span class="n">cwd</span><span class="o">=</span><span class="n">REPO_ROOT</span><span class="p">,</span>
        <span class="n">check</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>(I run Mypy via its Python API instead of the command line to save a tiny bit of
<code class="language-plaintext highlighter-rouge">subprocess.run()</code> overhead, but it doesn’t make a massive difference.)</p>

<p>This gets you all the functionality of the plugins, but with two fewer
dependencies, and the <code class="language-plaintext highlighter-rouge">-k</code> flag works:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Run tests for an in-progress feature and skip QA</span>
pytest <span class="nt">-k</span> test_some_feature

<span class="c"># Run only the QA tests</span>
pytest <span class="nt">-k</span> test_qa

<span class="c"># Run all tests</span>
pytest
</code></pre></div></div>
</div><div class="post-list-item"><span class="post-meta">
          <time datetime="2025-11-26T00:00:00+00:00">Nov 26, 2025</time>
        </span>
        <h2>
          <a class="post-link" href="/2025/11/26/time-person-2006.html">
            Person of the Year 2006
          </a>
        </h2><p>If you need a fun fact for a corporate icebreaker activity, you can always say,
“I was <em>Time</em> magazine’s Person of the Year in 2006,” then stand around
awkwardly waiting for someone to Google it.</p>

<p>The
<a href="https://time.com/6258607/you-time-person-of-the-year-2006/">official announcement</a>
of “your” accomplishment makes for good reading in 2025. In tech circles, we
often regard the early days of Web 2.0 as a time of naivety when we thought that
letting anyone post on the internet would democratize media and unlock an era of
creative expression. Of course, we know now that it isn’t so simple—that open
platforms can amplify extreme views, for example, or serve as vectors for
misinformation. But apparently we <em>also</em> knew this then, in the earliest days of
YouTube and Facebook:</p>

<blockquote>
  <p>Web 2.0 harnesses the stupidity of crowds as well as its wisdom. Some of the
comments on YouTube make you weep for the future of humanity just for the
spelling alone, never mind the obscenity and the naked hatred.</p>

  <p>But that’s what makes all this interesting. Web 2.0 is a massive social
experiment, and like any experiment worth trying, it could fail.</p>
</blockquote>

<p>Obviously, the course we chose twenty years ago led us to the world of today.
But we didn’t select this path arbitrarily, or without regard for the challenges
it would present; we examined the risks and decided the experiment was worth it.</p>

<p>I got a similar sense from reading Thomas Friedman’s <em>The World is Flat</em> (2005),
which lays out a theory of globalization based on the convergence of
technological development (the internet) and trade liberalization. Some of the
passages feel quaint:</p>

<blockquote>
  <p>If there is a skilled person in Timbuktu, he will get work if he knows how to
access the rest of the world, which is quite easy today. You can make a Web
site and have an e-mail address and you are up and running. (Ch. 3)</p>
</blockquote>

<p>(In the ebook, I commented, “Taxes? Immigration law?”) But elsewhere, Friedman
anticipates critiques of globalization which have now become standard:</p>

<blockquote>
  <p>In the flat world, the balance of power between global companies and the
individual communities in which they operate is tilting more and more in favor
of the companies, many of them American-based. These companies command as much
if not more power than many governments. (Ch. 13)</p>
</blockquote>

<p>Not to mention “What the world has never witnessed is an old-style pandemic in a
Wal-Mart world,” later on in the same chapter.</p>
</div><div class="post-list-item"><span class="post-meta">
          <time datetime="2025-11-23T00:00:00+00:00">Nov 23, 2025</time>
        </span>
        <h2>
          <a class="post-link" href="/2025/11/23/urban-arts.html">
            Urban Arts Career Pathways Takeover
          </a>
        </h2><p>My team at work recently got to host a Career Pathways Takeover at
<a href="https://urbanarts.org/">Urban Arts</a>, a nonprofit based in New York that teaches
programming, animation, and storytelling education to high schoolers to prepare
them for success in college and beyond.</p>

<p>I was so impressed by the students’ thoughtfulness and engagement. We walked our
group of Game Academy students through our team’s event planning process, and in
less than an hour they put together a rock-solid plan for a community arts
program to raise awareness about mental health issues, including how they’d use
data to capture the event’s positive impact (where I fit in). I hope the vision
can become a reality before long…!</p>

<p>Massive thanks the Urban Arts team for hosting us and for all that you do
through the Game Academy.</p>
</div><div class="post-list-item"><span class="post-meta">
          <time datetime="2025-10-21T00:00:00+00:00">Oct 21, 2025</time>
        </span>
        <h2>
          <a class="post-link" href="/2025/10/21/cls-application.html">
            Apply for CLS
          </a>
        </h2><p>This year’s application for Critical Language Scholarship from the US State
Department is now <a href="https://clscholarship.org/apply">open</a>. (Thanks, group chat!)</p>

<p>CLS is a fully funded summer language immersion program for American
undergraduate and graduate students. I strongly encourage any interested in
learning one of the nine
<a href="https://clscholarship.org/languages">critical languages</a> to apply. Some
languages require prior language study; others accept beginners.</p>

<p><em>Feel free to <a href="mailto:max@maxkapur.com">email me</a></em> if you are
considering the CLS program or have questions about the experience. I completed
CLS Korean in 2016 and have kept in touch with participants from lots of cohorts
since then. Here is my <a href="/2025/06/26/cls-advice.html">advice post</a>.</p>

<p>Good CLS blogs:</p>

<ul>
  <li><a href="https://bethanymaz.wordpress.com/">Bethany Maz</a></li>
  <li><a href="https://paulazhang.wordpress.com/">The Good Things Coming</a> (Paula Zhang)</li>
</ul>
</div></div>

    <div class="page-switcher">
      <div></div>

      <div><a href="/page/2/">Next page</a></div>
    </div>
</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Illusion Slopes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Max Kapur</li><li><a class="u-email" href="mailto:max@maxkapur.com">max@maxkapur.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span class="rss-link">via RSS</span></a></li><li><a href="https://github.com/maxkapur"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">maxkapur</span></a></li><li><a href="https://www.linkedin.com/in/maxkapur"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">maxkapur</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>I blog about culture, numerical optimization, and software. I work at a consulting firm as an operations research and numerical modeling specialist. All opinions are my own.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
